<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Visualisation of New Year Resolutions for 2015</title>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
    <script>
        //width and height
        var width = 960;
        var height = 600;

        //define the map projection
        var projection = d3.geo.albersUsa()
                .scale(1280)
                .translate([width/2, height/2]);

        // define default path generator
        var path = d3.geo.path()
                .projection(projection);

        //create the svg element
        var svg = d3.select("body")
                .append("svg")
                .attr("width", width)
                .attr("height", height);


        // load the compiled data
        d3.csv("compilation.csv", function(data)
        {
            // load the GeoJSON data for the states
            d3.json("us-states.json", function(json){
                //bind data and create one path per GeoJSON feature
                svg.selectAll("path")
                        .data(json.features)
                        .enter()
                        .append("path")
                        .attr("d", path)
                        .style("fill","cccccc")
                        .style("stroke", "white");

                //set up circles for the different locations
                svg.selectAll("circle")
                        .data(data)
                        .enter()
                        .append("circle")
                        .attr("cx", function(d){
                            return projection([d.long, d.lat])[0];
                        })
                        .attr("cy", function(d){
                            return projection([d.long, d.lat])[1];
                        })
                        .attr("r", 5)
                        .style("fill", "yellow")
                        .style("opacity", 0.75)
                        .on("mouseover", function(){
                            // what happens when a point is hovered over
                            d3.select(this)
                                    .style("fill", "black")
                        })
                        .on("mouseout", function(){
                            //what happens when overing over a point is done
                            d3.select(this)
                                    .style("fill", "yellow")
                        });
            });
        });

    </script>
</body>
</html>